<?php

$wgSitename = 'Sanat';

$wgDBserver = '{{ instance.value.db.server_host }}';
$wgDBuser = '{{ instance.value.db.user }}';
$wgDBpassword = '{{ instance.value.db.password }}';
$wgDBname = '{{ instance.value.db.database }}';

$wgLogo = '/logo.png';
$wgGroupPermissions['*']['createaccount'] = false;

wfLoadSkin( 'Vector' );

enableSemantics( $VHOST );
wfLoadExtension( 'PageForms' );
$wgPageFormsRedLinksCheckOnlyLocalProps = true;
$wgPageFormsRenameEditTabs = true;
$smwgQMaxInlineLimit = $wgCategoryPagingLimit = 250;
$smwgEnabledQueryDependencyLinksStore = true;

require "$IP/extensions/MixedNamespaceSearchSuggestions/MixedNamespaceSearchSuggestions.php";
wfLoadExtension( 'ParserFunctions' );
require "$IP/extensions/DeleteBatch/DeleteBatch.php";

require "$IP/extensions/Translate/Translate.php";
wfLoadExtensions( [ 'UniversalLanguageSelector', 'InputBox', 'Sanat' ] );


foreach ( $wgUrlProtocols as $index => $value ) {
	if ( $value === 'sms:' ) {
		unset( $wgUrlProtocols[ $index ] );
	}
}

function lfAddNamespace( $id, $name ) {
	global $wgExtraNamespaces, $wgContentNamespaces, $wgNamespacesToBeSearchedDefault,
		$wgCapitalLinkOverrides, $smwgNamespacesWithSemanticLinks;

	$constant = strtoupper( "NS_$name" );

	define( $constant, $id );
	define( $constant . '_TALK', $id + 1 );

	$wgExtraNamespaces[$id] = $name;
	$wgExtraNamespaces[$id + 1] = $name . '_talk';

	$wgContentNamespaces[] = $id;

	$wgNamespacesToBeSearchedDefault[$id] = true;
	$wgCapitalLinkOverrides[$id] = false;
	$wgCapitalLinkOverrides[$id + 1] = false;

	$smwgNamespacesWithSemanticLinks[$id] = true;
}

lfAddNamespace( 1200, 'Lud' );
require "$IP/extensions/Lud/Lud.php";

lfAddNamespace( 1202, 'WordNet' );
require "$IP/extensions/WordNet/WordNet.php";
$wgNamespacesWithSubpages[NS_WORDNET] = true;
$wgAllowDisplayTitle = true;
$wgRestrictDisplayTitle = false;

// XXX: this is broken. This is not present when MediaWiki runs scripts.
// The extensions should be installed with co_repos.
if ( file_exists( "$IP/extensions/Saame/Saame.php" ) ) {
	include_once "$IP/extensions/Saame/Saame.php";
}
lfAddNamespace( 1204, 'Sms' );
lfAddNamespace( 1206, 'Izh' );
foreach ( $wgUrlProtocols as $index => $value ) {
	if ( $value === 'sms:' ) {
		unset( $wgUrlProtocols[ $index ] );
	}
}

wfLoadExtension( 'Kotus' );
lfAddNamespace( 1210, 'Vepsä' );
lfAddNamespace( 1212, 'Slangipaikannimet' );
lfAddNamespace( 1216, 'Sosva' );
lfAddNamespace( 1218, 'Suomalais-venäläinen_kirja-alan_sanasto' );
lfAddNamespace( 1222, 'Namnledslexikon' );

wfLoadExtension( 'FinnFrameNet' );
lfAddNamespace( 1214, 'FinnFrameNet' );
lfAddNamespace( 1220, 'TransFrameNet' );

/* Etymologia-projekti */
lfAddNamespace( 1224, 'Etymologiadata' );
lfAddNamespace( 1228, 'EVE' );
$wgNamespaceProtection[ NS_ETYMOLOGIADATA ] = [ 'etymologi' ];
$wgNamespaceProtection[ NS_EVE ] = [ 'etymologiatoimittaja' ];
$wgGroupPermissions[ 'etymologiatoimittaja' ][ 'delete' ] = true;
$wgGroupPermissions[ 'etymologiatoimittaja' ][ 'move' ] = true;
$wgGroupPermissions[ 'etymologiatoimittaja' ][ 'etymologi' ] = true;
$wgGroupPermissions[ 'etymologi' ][ 'etymologi' ] = true;
$wgAddGroups[ 'etymologiatoimittaja' ] = [ 'etymologiatoimittaja', 'etymologi' ];

lfAddNamespace( 1226, 'Tsilari' );
$wgNamespaceProtection[ NS_TSILARI ] = [ 'tsilari' ];
$wgGroupPermissions[ 'tsilari' ][ 'tsilari' ] = true;

/* Mikko Bentlin: Nikkilän ruotsalaisperäiset lainasanat [RT: CSC##309855] */
lfAddNamespace( 1230, 'Nikkilän_lainasanat' );

/* A. Kanner, N. Partanen: https://www.kotus.fi/kielitieto/1800-luvun_kirjasuomi/tutkimushankkeet */
lfAddNamespace( 1232, 'Rapola' );

# Next free namespace 1234

